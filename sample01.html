<!DOCTYPE html>
<html lang="ja">

        <head>
            <meta charset="utf-8">
			<title>三目並べ</title>
			<link rel="stylesheet" href="sample01.css"> 
		</head>	
    
        <body>
            <h1>[ 三目並べ ]</h1>
            <table id="banmen">
                <tbody>
                    <tr>
						<td id="b1" onclick="clickA(this)"></td>　
						<!-- 左上の箱_b1 -->
						<td id="b2" onclick="clickA(this)"></td>　
						<!-- 上真ん中の箱_b2 -->
						<td id="b3" onclick="clickA(this)"></td>　
						<!-- 右上の箱_b3 -->
					</tr>
                    <tr>
						<td id="b4" onclick="clickA(this)"></td>  
						<!-- 真ん中左の箱_b4 -->
						<td id="b5" onclick="clickA(this)"></td>  
						<!-- ど真ん中の箱_b5-->
						<td id="b6" onclick="clickA(this)"></td>  
						<!-- 真ん中右の箱_b6 -->
					</tr>
                    <tr>
						<td id="b7" onclick="clickA(this)"></td>  
						<!-- 左下の箱_b7 -->
						<td id="b8" onclick="clickA(this)"></td>  
						<!-- 下真ん中の箱_b8 -->
						<td id="b9" onclick="clickA(this)"></td>  
						<!-- 右下の箱_b9 -->
					</tr>
                </tbody>
			</table>
			<button class="button" onClick="location.reload()">やり直し</button>  
			<!-- やり直しのボタン設置 -->
        </body>

        <script>
			var count = 0;

			function clickA(x){
				if(x.innerText != ""){
					alert("既にコマが置かれているため、この場所を選択することが出来ません。");  //コマの置き場が被った場合に表示する
					return;
				}
				if(count++ %2 == 0){
					x.innerText = "〇";  //先行で〇を置く
				}
				else{
					x.innerText = "✕";  //後攻で✕を置く
				}

				var ret = judge();
				if(ret) {
					alert(ret);
				}
			}

			function judge(){
	            var box1 = document.getElementById('b1').innerText;
	            var box2 = document.getElementById('b2').innerText;
	            var box3 = document.getElementById('b3').innerText;
	            var box4 = document.getElementById('b4').innerText;
	            var box5 = document.getElementById('b5').innerText;
	            var box6 = document.getElementById('b6').innerText;
	            var box7 = document.getElementById('b7').innerText;
	            var box8 = document.getElementById('b8').innerText;
	            var box9 = document.getElementById('b9').innerText;
            
			    if(box1 == box2 && box2 == box3 && box1 != ""){  //上横一列並んだら勝ち
				    winner = box1;
			    }
                else if (box4 == box5 && box5 == box6 && box4 != "" ){  //真ん中横一列並んだら勝ち
				    winner = box4;
			    }
                else if (box7 == box8 && box8 == box9 && box8 != "" ){  //下横一列並んだら勝ち
				    winner = box7;
                }
			    else if (box1 == box4 && box4 == box7 && box1 != "" ){  //左縦一列並んだら勝ち
				    winner = box1;
                }
                else if (box2 == box5 && box5 == box8 && box2 != "" ){  //真ん中縦一列並んだら勝ち
				    winner = box2;
			    }
                else if (box3 == box6 && box6 == box9 && box3 != "" ){  //右縦一列並んだら勝ち
				    winner = box3;
			    }
                else if (box1 == box5 && box5 == box9 && box1 != "" ){  //左上から右下に斜め一列に並んだら勝ち
				    winner = box1;
			    }
                else if (box3 == box5 && box5 == box7 && box3 != "" ){  //右上から左下に斜め一列に並んだら勝ち
				    winner = box3;
			    }

                var str;
				if(count == 9){
					str = "同数のため、引き分けです\nやり直したい場合は、[やり直し]ボタンを押してください";  //ターンを9回繰り返したら引き分け
				}
                else if (winner) {
				    str = winner + "の勝利！\nやり直したい場合は、[やり直し]ボタンを押してください";  //勝者を表示する
				}
                return str ;;
			}
		</script>
</html>